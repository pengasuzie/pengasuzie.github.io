<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>docsbot — Drop-in AI Help Widget for React</title>
<meta name="description" content="Add an AI help assistant to your site in under 5 minutes. A lightweight React widget powered by Claude that answers questions from your knowledge base.">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<meta property="og:title" content="docsbot — Drop-in AI Help Widget for React">
<meta property="og:description" content="Add an AI help assistant to your site in under 5 minutes. A lightweight React widget powered by Claude that answers questions from your knowledge base.">
<meta property="og:image" content="https://pengasuzie.github.io/images/social-card.png">
<meta property="og:url" content="https://pengasuzie.github.io/projects/docsbot/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="docsbot — Drop-in AI Help Widget for React">
<meta name="twitter:description" content="Add an AI help assistant to your site in under 5 minutes. A lightweight React widget powered by Claude that answers questions from your knowledge base.">
<meta name="twitter:image" content="https://pengasuzie.github.io/images/social-card.png">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --black: #0a0a0a;
    --white: #f7f5f0;
    --blue: #0046ff;
    --grey: #666666;
    --light: #eceae4;
    --rule: #d4d0c8;
  }

  body {
    font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background: var(--white);
    color: var(--black);
    font-size: 16px;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  .container {
    max-width: 1120px;
    margin: 0 auto;
    padding: 0 40px;
  }

  /* === HEADER === */
  header {
    padding: 40px 0 0;
    border-bottom: 3px solid var(--black);
  }

  .header-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: end;
    padding-bottom: 24px;
  }

  .logo {
    font-size: 13px;
    font-weight: 900;
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }

  .logo a { text-decoration: none; color: var(--black); }
  .logo a:hover { color: var(--blue); }

  nav {
    text-align: right;
    display: flex;
    justify-content: flex-end;
    gap: 32px;
  }

  nav a {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    text-decoration: none;
    color: var(--black);
  }

  nav a:hover { color: var(--blue); }

  /* === HERO === */
  .hero {
    padding: 80px 0 60px;
    border-bottom: 1px solid var(--rule);
  }

  .hero-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
  }

  .hero h1 {
    font-size: 48px;
    font-weight: 900;
    line-height: 1.1;
    letter-spacing: -0.02em;
    margin-bottom: 20px;
  }

  .hero h1 span { color: var(--blue); }

  .hero-sub {
    font-size: 18px;
    color: var(--grey);
    line-height: 1.7;
    margin-bottom: 32px;
  }

  .btn {
    display: inline-block;
    padding: 12px 28px;
    font-size: 13px;
    font-weight: 900;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    text-decoration: none;
    border: 2px solid var(--black);
    color: var(--black);
    background: transparent;
    cursor: pointer;
    transition: all 0.15s;
  }

  .btn:hover {
    background: var(--black);
    color: var(--white);
  }

  .btn.primary {
    background: var(--blue);
    border-color: var(--blue);
    color: white;
  }

  .btn.primary:hover {
    background: #0039d4;
    border-color: #0039d4;
  }

  .btn + .btn { margin-left: 12px; }

  /* === SECTIONS === */
  .section-label {
    font-size: 11px;
    font-weight: 900;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--grey);
    margin-bottom: 40px;
  }

  section {
    padding: 60px 0;
    border-bottom: 1px solid var(--rule);
  }

  /* === TWO COL === */
  .two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: start;
  }

  .two-col h2 {
    font-size: 28px;
    font-weight: 900;
    margin-bottom: 12px;
    letter-spacing: -0.01em;
  }

  .two-col p {
    font-size: 15px;
    color: var(--grey);
    line-height: 1.7;
    margin-bottom: 16px;
  }

  /* === CODE === */
  .code-block {
    background: var(--black);
    color: #a1a1aa;
    border-radius: 8px;
    padding: 20px 24px;
    font-family: 'JetBrains Mono', 'SF Mono', 'Consolas', monospace;
    font-size: 13px;
    line-height: 1.8;
    overflow-x: auto;
  }

  .code-block .comment { color: #52525b; }
  .code-block .keyword { color: #818cf8; }
  .code-block .string { color: #86efac; }
  .code-block .fn { color: #67e8f9; }
  .code-block .tag { color: #fbbf24; }

  /* === STEPS === */
  .steps {
    counter-reset: step;
  }

  .step {
    padding: 40px 0;
    border-top: 2px solid var(--black);
    display: grid;
    grid-template-columns: 80px 1fr 1fr;
    gap: 40px;
    align-items: start;
  }

  .step-number {
    font-size: 36px;
    font-weight: 900;
    color: var(--blue);
    counter-increment: step;
  }

  .step h3 {
    font-size: 20px;
    font-weight: 900;
    margin-bottom: 8px;
  }

  .step p {
    font-size: 15px;
    color: var(--grey);
    line-height: 1.7;
  }

  /* === FEATURES === */
  .feature-list {
    list-style: none;
    font-size: 14px;
  }

  .feature-list li {
    padding: 8px 0;
    border-bottom: 1px solid var(--light);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .feature-list li::before {
    content: '';
    width: 6px;
    height: 6px;
    background: var(--blue);
    display: inline-block;
    flex-shrink: 0;
  }

  /* === WIDGET DEMO === */
  .widget-demo {
    background: #fff;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    overflow: hidden;
    max-width: 380px;
  }

  .widget-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid #e2e8f0;
    background: #f8fafc;
  }

  .widget-header-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    font-size: 14px;
    color: #1e293b;
  }

  .widget-header-title svg { color: var(--blue); }

  .widget-suggested {
    padding: 12px 16px;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    border-bottom: 1px solid #e2e8f0;
  }

  .widget-suggested button {
    font-family: inherit;
    font-size: 12px;
    padding: 6px 12px;
    border: 1px solid #e2e8f0;
    border-radius: 16px;
    background: white;
    color: #475569;
    cursor: default;
  }

  .widget-body { padding: 16px; }

  .widget-msg {
    padding: 10px 14px;
    border-radius: 12px;
    font-size: 13px;
    line-height: 1.5;
    margin-bottom: 10px;
    max-width: 85%;
  }

  .widget-msg.user {
    background: var(--blue);
    color: white;
    margin-left: auto;
    border-bottom-right-radius: 4px;
  }

  .widget-msg.bot {
    background: #f8fafc;
    color: #1e293b;
    border-bottom-left-radius: 4px;
  }

  .widget-input {
    display: flex;
    gap: 6px;
    padding: 10px;
    border-top: 1px solid #e2e8f0;
  }

  .widget-input input {
    flex: 1;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 10px 14px;
    font-size: 13px;
    font-family: inherit;
    outline: none;
    color: #94a3b8;
  }

  .widget-input button {
    width: 38px;
    height: 38px;
    border-radius: 8px;
    border: none;
    background: var(--blue);
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* === PROPS TABLE === */
  .props-table {
    width: 100%;
    font-size: 14px;
    border-collapse: collapse;
  }

  .props-table thead tr {
    border-bottom: 2px solid var(--black);
    text-align: left;
  }

  .props-table th {
    padding: 8px 12px 8px 0;
    font-size: 12px;
    font-weight: 900;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .props-table td {
    padding: 10px 12px 10px 0;
    border-bottom: 1px solid var(--rule);
    vertical-align: top;
  }

  .props-table code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    background: var(--light);
    padding: 2px 6px;
    border-radius: 3px;
  }

  .props-table .desc { color: var(--grey); }

  /* === FOOTER === */
  footer {
    padding: 40px 0;
    border-top: 3px solid var(--black);
  }

  .footer-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
  }

  .footer-left {
    font-size: 13px;
    color: var(--grey);
  }

  .footer-right {
    text-align: right;
    display: flex;
    justify-content: flex-end;
    gap: 24px;
  }

  .footer-right a {
    font-size: 13px;
    font-weight: 700;
    text-decoration: none;
    color: var(--black);
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  .footer-right a:hover { color: var(--blue); }

  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .container { padding: 0 24px; }
    .hero h1 { font-size: 32px; }
    .hero-grid { grid-template-columns: 1fr; gap: 32px; }
    .two-col { grid-template-columns: 1fr; gap: 32px; }
    .step { grid-template-columns: 1fr; gap: 16px; }
    .step .code-block { grid-column: 1; }
  }
</style>
</head>
<body>

<header>
  <div class="container">
    <div class="header-grid">
      <div class="logo"><a href="/">Bruce Stronge</a></div>
      <nav>
        <a href="/">Home</a>
        <a href="https://github.com/pengasuzie/docsbot">GitHub</a>
      </nav>
    </div>
  </div>
</header>

<section class="hero">
  <div class="container">
    <div class="hero-grid">
      <div>
        <h1>AI help widget<br>for <span>any site.</span></h1>
        <p class="hero-sub">
          Add a floating chat assistant powered by Claude to your site in under 5 minutes.
          Point it at your docs, drop in the component, done. One dependency, fully themeable.
        </p>
        <a href="https://github.com/pengasuzie/docsbot" class="btn primary">Get Started</a>
        <a href="#setup" class="btn">Setup Guide</a>
      </div>
      <div style="display: flex; align-items: center; justify-content: center;">
        <div style="text-align: center;">
          <p style="font-size: 15px; color: var(--grey); margin-bottom: 12px;">Try it now &darr;</p>
          <p style="font-size: 13px; color: var(--grey);">Click the chat button in the bottom-right corner.<br>It knows everything about docsbot.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FEATURES -->
<section>
  <div class="container">
    <div class="section-label">What You Get</div>
    <div class="two-col">
      <div>
        <h2>Drop-in widget</h2>
        <p>A floating chat panel with a trigger button. Import the component, pass your API endpoint, and you're done. The widget handles the conversation UI, typewriter animation, suggested questions, and mobile layout.</p>
        <ul class="feature-list">
          <li>Floating panel with trigger button</li>
          <li>Typewriter animation for responses</li>
          <li>Configurable suggested questions</li>
          <li>Themeable via CSS custom properties</li>
          <li>Position: bottom-right or bottom-left</li>
        </ul>
      </div>
      <div>
        <h2>Headless hook</h2>
        <p>Need full control? Use the <code style="background: var(--light); padding: 2px 6px; border-radius: 3px;">useDocsBot()</code> hook to build your own UI. You get messages, loading state, error handling, and send/clear functions.</p>
        <ul class="feature-list">
          <li>Full conversation state management</li>
          <li>Loading and error states</li>
          <li>Send and clear functions</li>
          <li>Build any UI you want</li>
          <li>Same backend handler</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- ARCHITECTURE -->
<section>
  <div class="container">
    <div class="section-label">How It Works</div>
    <div class="two-col">
      <div>
        <h2>Three pieces</h2>
        <p>The widget (React component), the hook (headless alternative), and the backend handler. The handler takes your knowledge base as a markdown string, builds a system prompt, and calls Claude Haiku. Cheap and fast.</p>
        <p>Dynamic context lets you inject per-request data &mdash; current page, user role, account info &mdash; so answers are always relevant.</p>
      </div>
      <div style="display: flex; align-items: center;">
        <div class="code-block" style="width: 100%;">
<span class="comment">// The architecture</span>

User clicks help <span class="keyword">&rarr;</span> DocsBot widget opens
                    <span class="keyword">&rarr;</span>
User types question <span class="keyword">&rarr;</span> POST /api/docsbot
                       <span class="keyword">&rarr;</span>
              <span class="fn">createDocsBotHandler</span>:
              <span class="comment">- Builds system prompt</span>
              <span class="comment">  (knowledge + context + page)</span>
              <span class="comment">- Sends to Claude Haiku</span>
              <span class="comment">- Returns answer</span>
                       <span class="keyword">&rarr;</span>
              Widget shows <span class="tag">typewriter animation</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- SETUP -->
<section id="setup">
  <div class="container">
    <div class="section-label">Setup Guide</div>
    <div class="steps">

      <div class="step">
        <div class="step-number">01</div>
        <div>
          <h3>Install</h3>
          <p>Two packages: the widget itself and the Anthropic SDK for the backend handler.</p>
        </div>
        <div class="code-block">
<span class="fn">npm install</span> docsbot @anthropic-ai/sdk
        </div>
      </div>

      <div class="step">
        <div class="step-number">02</div>
        <div>
          <h3>Create your knowledge base</h3>
          <p>Write your docs as markdown. The handler injects this into the system prompt so Claude can answer questions about your product.</p>
        </div>
        <div class="code-block">
<span class="comment">&lt;!-- knowledge.md --&gt;</span>
<span class="tag"># My Product</span>

<span class="tag">## Dashboard</span>
The dashboard shows an overview
of your account...

<span class="tag">## Settings</span>
Configure your account from the
Settings page...
        </div>
      </div>

      <div class="step">
        <div class="step-number">03</div>
        <div>
          <h3>Add the API route</h3>
          <p>A single file. The handler reads your knowledge base, manages conversation history, and calls Claude. Works with Next.js, Express, or any Node server.</p>
        </div>
        <div class="code-block">
<span class="comment">// app/api/docsbot/route.ts</span>
<span class="keyword">import</span> { <span class="fn">createDocsBotHandler</span> }
  <span class="keyword">from</span> <span class="string">"docsbot/api"</span>;

<span class="keyword">const</span> handler = <span class="fn">createDocsBotHandler</span>({
  apiKey: process.env.<span class="tag">ANTHROPIC_API_KEY</span>,
  knowledge,
});

<span class="keyword">export const</span> POST = handler;
        </div>
      </div>

      <div class="step">
        <div class="step-number">04</div>
        <div>
          <h3>Add the widget</h3>
          <p>Import the component, import the styles, pass the endpoint. A help button appears in the bottom-right corner. That's it.</p>
        </div>
        <div class="code-block">
<span class="keyword">import</span> { <span class="fn">DocsBot</span> } <span class="keyword">from</span> <span class="string">"docsbot"</span>;
<span class="keyword">import</span> <span class="string">"docsbot/styles.css"</span>;

<span class="keyword">&lt;</span><span class="fn">DocsBot</span>
  endpoint=<span class="string">"/api/docsbot"</span>
  suggestedQuestions={[
    <span class="string">"How do I get started?"</span>,
    <span class="string">"What features are available?"</span>,
  ]}
<span class="keyword">/&gt;</span>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- CUSTOMIZATION -->
<section>
  <div class="container">
    <div class="section-label">Customization</div>
    <div class="two-col">
      <div>
        <h2>Theming</h2>
        <p>Override CSS custom properties to match your brand. Colors, sizing, border radius, widget dimensions &mdash; all configurable.</p>
        <div class="code-block" style="margin-top: 16px;">
<span class="keyword">:root</span> {
  <span class="fn">--docsbot-primary</span>: <span class="tag">#8b5cf6</span>;
  <span class="fn">--docsbot-user-bg</span>: <span class="tag">#8b5cf6</span>;
  <span class="fn">--docsbot-radius</span>: <span class="tag">16px</span>;
  <span class="fn">--docsbot-width</span>: <span class="tag">420px</span>;
  <span class="fn">--docsbot-height</span>: <span class="tag">600px</span>;
}
        </div>
      </div>
      <div>
        <h2>Widget props</h2>
        <table class="props-table">
          <thead>
            <tr>
              <th>Prop</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>endpoint</code></td>
              <td class="desc">Your API route URL (required)</td>
            </tr>
            <tr>
              <td><code>title</code></td>
              <td class="desc">Header title (default: "Help")</td>
            </tr>
            <tr>
              <td><code>placeholder</code></td>
              <td class="desc">Input placeholder text</td>
            </tr>
            <tr>
              <td><code>position</code></td>
              <td class="desc">"bottom-right" or "bottom-left"</td>
            </tr>
            <tr>
              <td><code>suggestedQuestions</code></td>
              <td class="desc">Array or function returning questions</td>
            </tr>
            <tr>
              <td><code>currentPage</code></td>
              <td class="desc">Page context for smarter answers</td>
            </tr>
            <tr>
              <td><code>headers</code></td>
              <td class="desc">Extra headers for authenticated APIs</td>
            </tr>
            <tr>
              <td><code>onToggle</code></td>
              <td class="desc">Callback when widget opens/closes</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<!-- BACKEND CONFIG -->
<section>
  <div class="container">
    <div class="section-label">Backend Configuration</div>
    <div class="two-col">
      <div>
        <h2>Handler options</h2>
        <p>The backend handler is configurable: swap models, set token limits, add dynamic context per request. The <code style="background: var(--light); padding: 2px 6px; border-radius: 3px;">getContext</code> function lets you inject user-specific or page-specific data into every request.</p>
        <table class="props-table" style="margin-top: 16px;">
          <thead>
            <tr>
              <th>Option</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>apiKey</code></td>
              <td class="desc">Anthropic API key (required)</td>
            </tr>
            <tr>
              <td><code>knowledge</code></td>
              <td class="desc">Markdown knowledge base</td>
            </tr>
            <tr>
              <td><code>model</code></td>
              <td class="desc">Claude model (default: Haiku)</td>
            </tr>
            <tr>
              <td><code>maxTokens</code></td>
              <td class="desc">Max response tokens (default: 512)</td>
            </tr>
            <tr>
              <td><code>maxHistory</code></td>
              <td class="desc">Conversation history limit (default: 10)</td>
            </tr>
            <tr>
              <td><code>getContext</code></td>
              <td class="desc">Dynamic per-request context builder</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div>
        <h2>Dynamic context</h2>
        <p>Add per-request context so answers reflect the user's current state. The function receives the request and can return any string to append to the system prompt.</p>
        <div class="code-block" style="margin-top: 16px;">
<span class="keyword">const</span> handler = <span class="fn">createDocsBotHandler</span>({
  apiKey: process.env.<span class="tag">ANTHROPIC_API_KEY</span>,
  knowledge,
  <span class="fn">getContext</span>: <span class="keyword">async</span> ({ currentPage }) => {
    <span class="keyword">return</span> <span class="string">`User is on the
      ${currentPage} page.`</span>;
  },
});
        </div>

        <h2 style="margin-top: 32px;">Headless mode</h2>
        <div class="code-block" style="margin-top: 12px;">
<span class="keyword">import</span> { <span class="fn">useDocsBot</span> } <span class="keyword">from</span> <span class="string">"docsbot"</span>;

<span class="keyword">const</span> {
  messages,
  loading,
  error,
  <span class="fn">sendMessage</span>,
  <span class="fn">clearMessages</span>,
} = <span class="fn">useDocsBot</span>({
  endpoint: <span class="string">"/api/docsbot"</span>,
});
        </div>
      </div>
    </div>
  </div>
</section>

<footer>
  <div class="container">
    <div class="footer-grid">
      <div class="footer-left">&copy; 2026 Bruce Stronge. Brisbane, Australia.</div>
      <div class="footer-right">
        <a href="https://github.com/pengasuzie/docsbot">GitHub</a>
        <a href="/">Home</a>
      </div>
    </div>
  </div>
</footer>

<!-- LIVE DEMO WIDGET -->
<style>
  .demo-trigger {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--blue);
    color: white;
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 16px rgba(0,70,255,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.15s, box-shadow 0.15s;
    z-index: 1000;
  }
  .demo-trigger:hover {
    transform: scale(1.08);
    box-shadow: 0 6px 24px rgba(0,70,255,0.4);
  }
  .demo-trigger.open svg { display: none; }
  .demo-trigger.open::after { content: '\00d7'; font-size: 28px; font-weight: 300; }

  .demo-panel {
    position: fixed;
    bottom: 96px;
    right: 24px;
    width: 380px;
    max-height: 520px;
    background: #fff;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.12);
    display: none;
    flex-direction: column;
    overflow: hidden;
    z-index: 1000;
    font-family: 'Inter', sans-serif;
  }
  .demo-panel.visible { display: flex; }

  .demo-panel-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 14px 16px;
    border-bottom: 1px solid #e2e8f0;
    background: #f8fafc;
    font-weight: 600;
    font-size: 14px;
    color: #1e293b;
  }
  .demo-panel-header svg { color: var(--blue); flex-shrink: 0; }
  .demo-panel-header span {
    font-size: 11px;
    font-weight: 400;
    color: #94a3b8;
    margin-left: auto;
  }

  .demo-suggestions {
    padding: 10px 16px;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    border-bottom: 1px solid #e2e8f0;
  }
  .demo-suggestions button {
    font-family: inherit;
    font-size: 12px;
    padding: 6px 12px;
    border: 1px solid #e2e8f0;
    border-radius: 16px;
    background: white;
    color: #475569;
    cursor: pointer;
    transition: background 0.1s, border-color 0.1s;
  }
  .demo-suggestions button:hover {
    background: #f1f5f9;
    border-color: #cbd5e1;
  }

  .demo-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    min-height: 200px;
    max-height: 320px;
  }

  .demo-msg {
    padding: 10px 14px;
    border-radius: 12px;
    font-size: 13px;
    line-height: 1.5;
    margin-bottom: 10px;
    max-width: 85%;
    animation: fadeIn 0.15s ease;
  }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

  .demo-msg.user {
    background: var(--blue);
    color: white;
    margin-left: auto;
    border-bottom-right-radius: 4px;
  }
  .demo-msg.bot {
    background: #f8fafc;
    color: #1e293b;
    border-bottom-left-radius: 4px;
  }
  .demo-msg.bot .cursor {
    display: inline-block;
    width: 2px;
    height: 14px;
    background: var(--blue);
    margin-left: 2px;
    vertical-align: text-bottom;
    animation: blink 0.6s infinite;
  }
  @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

  .demo-input-bar {
    display: flex;
    gap: 6px;
    padding: 10px;
    border-top: 1px solid #e2e8f0;
  }
  .demo-input-bar input {
    flex: 1;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 10px 14px;
    font-size: 13px;
    font-family: inherit;
    outline: none;
    color: var(--black);
  }
  .demo-input-bar input:focus { border-color: var(--blue); }
  .demo-input-bar input::placeholder { color: #94a3b8; }
  .demo-input-bar button {
    width: 38px;
    height: 38px;
    border-radius: 8px;
    border: none;
    background: var(--blue);
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .demo-input-bar button:disabled { opacity: 0.5; cursor: default; }

  @media (max-width: 480px) {
    .demo-panel { width: calc(100vw - 32px); right: 16px; bottom: 88px; }
  }
</style>

<button class="demo-trigger" id="demoTrigger" aria-label="Open help widget demo">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
</button>

<div class="demo-panel" id="demoPanel">
  <div class="demo-panel-header">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
    docsbot Help
    <span>Live demo</span>
  </div>
  <div class="demo-suggestions" id="demoSuggestions">
    <button>How do I install docsbot?</button>
    <button>What can I customize?</button>
    <button>Is there a headless mode?</button>
  </div>
  <div class="demo-messages" id="demoMessages"></div>
  <div class="demo-input-bar">
    <input type="text" id="demoInput" placeholder="Ask about docsbot...">
    <button id="demoSend">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
    </button>
  </div>
</div>

<script>
(function() {
  const QA = [
    { q: "how do i install docsbot", a: "Run <strong>npm install docsbot @anthropic-ai/sdk</strong>, create a knowledge base markdown file, add a one-file API route, and drop the <strong>&lt;DocsBot&gt;</strong> component into your page. Four steps, under 5 minutes." },
    { q: "what can i customize", a: "Everything visual is controlled by CSS custom properties: <strong>--docsbot-primary</strong> for brand color, <strong>--docsbot-width</strong> and <strong>--docsbot-height</strong> for sizing, <strong>--docsbot-radius</strong> for corners. You can also set the title, placeholder, position (bottom-right or bottom-left), and suggested questions via props." },
    { q: "is there a headless mode", a: "Yes &mdash; import <strong>useDocsBot()</strong> instead of the widget component. You get messages, loading state, error handling, sendMessage, and clearMessages. Build whatever UI you want on top." },
    { q: "what model does it use", a: "Claude Haiku by default &mdash; fast and cheap. You can swap it to any Claude model by setting the <strong>model</strong> option in createDocsBotHandler. Sonnet or Opus work too if you need deeper reasoning." },
    { q: "how does the knowledge base work", a: "Write your docs as a markdown string. The handler injects it into Claude's system prompt. You can also add <strong>getContext</strong> to inject dynamic per-request data like the current page or user role." },
    { q: "what frameworks does it support", a: "The widget is React. The backend handler works with <strong>Next.js</strong> (App Router or Pages), <strong>Express</strong>, or any Node server that handles POST requests. The handler returns a standard Response object." },
    { q: "how much does it cost to run", a: "The only cost is Claude API usage. Haiku is very cheap &mdash; a typical help conversation costs fractions of a cent. There's no docsbot license fee. It's MIT licensed and free." },
    { q: "can i add suggested questions", a: "Yes &mdash; pass a <strong>suggestedQuestions</strong> prop as a string array or a function. You can make them static or dynamic per page. They show as clickable pills above the chat." },
    { q: "how do i theme it", a: "Override CSS custom properties on <strong>:root</strong>. Key variables: --docsbot-primary, --docsbot-user-bg, --docsbot-radius, --docsbot-width, --docsbot-height. No build step needed &mdash; just CSS." },
    { q: "what dependencies does it have", a: "Just one runtime dependency: <strong>react-markdown</strong> for rendering markdown in responses. The widget itself is lightweight. Plus @anthropic-ai/sdk on the backend." },
  ];

  const fallback = "I can answer questions about docsbot &mdash; how to install it, customize it, what frameworks it supports, pricing, the headless hook, and more. Try asking one of those!";

  function findAnswer(input) {
    const q = input.toLowerCase().replace(/[?!.,]/g, '');
    let best = null, bestScore = 0;
    for (const item of QA) {
      const words = item.q.split(' ');
      const score = words.filter(w => q.includes(w)).length / words.length;
      if (score > bestScore) { bestScore = score; best = item; }
    }
    return bestScore > 0.3 ? best.a : fallback;
  }

  const trigger = document.getElementById('demoTrigger');
  const panel = document.getElementById('demoPanel');
  const messages = document.getElementById('demoMessages');
  const input = document.getElementById('demoInput');
  const sendBtn = document.getElementById('demoSend');
  const suggestions = document.getElementById('demoSuggestions');
  let typing = false;

  trigger.addEventListener('click', () => {
    const open = panel.classList.toggle('visible');
    trigger.classList.toggle('open', open);
    if (open) input.focus();
  });

  function addMsg(text, role) {
    const div = document.createElement('div');
    div.className = 'demo-msg ' + role;
    div.innerHTML = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
    return div;
  }

  function typewrite(el, html, cb) {
    typing = true;
    sendBtn.disabled = true;
    const tmp = document.createElement('div');
    tmp.innerHTML = html;
    const text = tmp.textContent;
    let i = 0;
    el.innerHTML = '<span class="cursor"></span>';
    const interval = setInterval(() => {
      i++;
      // Rebuild innerHTML up to character i, preserving tags
      el.innerHTML = html.slice(0, findHtmlIndex(html, i)) + '<span class="cursor"></span>';
      messages.scrollTop = messages.scrollHeight;
      if (i >= text.length) {
        clearInterval(interval);
        el.innerHTML = html;
        typing = false;
        sendBtn.disabled = false;
        if (cb) cb();
      }
    }, 18);
  }

  // Map plain-text index to HTML index (skip tags)
  function findHtmlIndex(html, charCount) {
    let chars = 0, inTag = false;
    for (let i = 0; i < html.length; i++) {
      if (html[i] === '<') inTag = true;
      if (!inTag) chars++;
      if (chars >= charCount && !inTag) return i + 1;
      if (html[i] === '>') inTag = false;
    }
    return html.length;
  }

  function send(text) {
    if (typing || !text.trim()) return;
    addMsg(text, 'user');
    input.value = '';
    suggestions.style.display = 'none';
    setTimeout(() => {
      const answer = findAnswer(text);
      const el = addMsg('', 'bot');
      typewrite(el, answer);
    }, 300 + Math.random() * 400);
  }

  sendBtn.addEventListener('click', () => send(input.value));
  input.addEventListener('keydown', (e) => { if (e.key === 'Enter') send(input.value); });

  suggestions.addEventListener('click', (e) => {
    if (e.target.tagName === 'BUTTON') send(e.target.textContent);
  });
})();
</script>

</body>
</html>
